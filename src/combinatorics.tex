\documentclass{article}
\usepackage{booktabs}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{cancel}
\usepackage{array}
\usepackage{float}
\usepackage[hidelinks]{hyperref}

\title{Combinatorics}

\begin{document}
    \maketitle

    \tableofcontents

    \begin{equation}
        |\overline{A} \cap \overline{B}| = |S| - |A \cup B|
    \end{equation}

    \section{Basis}

    The best way to think about combinations and permutations is to think about all permutations of $n$ things: \begin{equation}
        n! = P(n, n)
    \end{equation}

    Then we think about discounting orderings that are the same: \begin{equation}
        \frac{n!}{k_1! k_2! \cdots k_m!} = {n \choose k_1, k_2, ..., k_m}, \quad \text{where } \sum_{i = 1}^m{k_i} = n
    \end{equation}

    This is referred to as \textbf{permutations of multisets} and is related to the \textbf{multinomial theorem}. These represent items in the set that are considered the same. From this, we can derive all other types of combinations and permutations.

    For standard \textbf{permutations}: \begin{equation}
        P(n, r) = {n \choose \underbrace{1, 1, ..., 1}_{r \text{ times}}, n - r}
    \end{equation}

    For standard \textbf{combinations}: \begin{equation}
        {n \choose r} = {n \choose r, n - r}
    \end{equation}

    Note: if the sum of the $k_i$'s is not equal to $n$, then there is always an implicit group the size of $n$ minus the sum of the $k_i$'s.

    \subsection{From Multisets}

    For some multiset $A$ where $n = |A|$ and $m$ is the number of groups: $$\def\arraystretch{3}
    \begin{array}{>{\displaystyle}cc>{\displaystyle}c}
        A & m & f \\
        \hline
        \{n_1 \cdot a_1, ..., n_r \cdot a_r, 1 \cdot a_{r + 1}, ..., 1 \cdot a_m\} & r + n - \sum{n_i} & {n \choose n_1, ..., n_r} \\
        \{r \cdot a, (n - r) \cdot \varepsilon\} & 2 & {n \choose r} \\
        \{r \cdot a, (n - 1) \cdot \varepsilon\} & r & \left(\!\!{n \choose r}\!\!\right) \\
        \{1 \cdot a_1, ..., 1 \cdot a_r, (n - r) \cdot \varepsilon\} & r + 1 & P(n, r) \\
        \{\infty \cdot a_1, ..., \infty \cdot a_r\} & r & n^r \\
    \end{array}$$

    $\varepsilon$ represents characters we don't choose.
    
    \section{Alternative Basis}

    Another way to think about combinations and permutations is to start with combinations: \begin{equation}
        C(n, r) = {n \choose r} = \frac{n!}{r!(n - r)!}
    \end{equation}

    Permutations can then be thought of as reordering $n$ things: \begin{equation}
        P(n, n) = n!
    \end{equation}
        
    To permute a subgroup, first \textit{choose} the subgroup, then permute: \begin{equation}
        P(n, r) = \color{purple}{n \choose r}r!\color{black} = \frac{n!}{\cancel{r!}(n - r)!}\cancel{r!} = \frac{n!}{(n - r)!}, \quad r \leq n
    \end{equation}

    \section{The Pigeonhole Principle}

    \begin{table}[H]
        \centering
        \caption{Pigeonhole Principle Variations}
        \begin{tabular}{lcclc}
            \toprule
            Variation & Objects & Boxes & Bound & \# Objects \\
            \midrule
            Basic & $n + 1$ & $n$ & Lower & 2 \\
            Inverse & $n - 1$ & $n$ & Upper & 0 \\
            Extended & $nk + 1$ & $n$ & Lower & $k + 1$ \\
            Extended Inverse & $nk - 1$ & $n$ & Upper & $k - 1$ \\
            Generalized & $m$ & $n$ & Lower & $\lceil\frac{m}{n}\rceil$ \\
            & & & Upper & $\lfloor\frac{m}{n}\rfloor$ \\
            \bottomrule
        \end{tabular}
    \end{table}

    \section{Principle of Inclusionâ€“Exclusion (PIE)}

    For 2 sets: \begin{equation}
        |A \cup B| = |A| + |B| - |A \cap B|
    \end{equation}

    For $n$ sets: \begin{equation}
        \begin{split}
            |A_1 \cup \cdots \cup A_n| = & |A_1| + \cdots + |A_n| \\
            - & |A_1 \cap A_2| - \cdots - |A_{n - 1} \cap A_n| \\
            + & |A_1 \cap A_2 \cap A_3| + \cdots + |A_{n - 2} \cap A_{n - 1} \cap A_n| - \cdots \\
            + & (-1)^{n - 1}\left\lvert\bigcap_{i = 0}^n{A_i}\right\rvert 
        \end{split}
    \end{equation}

    Complement for $m$ conditions: \begin{equation}
        \begin{split}
            \bar{N} = & N - N(c_1) - \cdots - N(c_m) \\
            + & N(c_1c_2) + \cdots + N(c_{n - 1}c_n) \\
            - & N(c_1c_2c_3) - \cdots - N(c_{n - 2}c_{n - 1}c_n) - \cdots \\
            + & (-1)^mN(c_1 \cdots c_m)
        \end{split}
    \end{equation}

    \section{Number of Onto Functions}

    For a function $f : A \to B$, where $n = |A|$ and $m = |B|$: \begin{equation}
        \sum_{k = 0}^m{(-1)^k{m \choose k}(m - k)^n}
    \end{equation}

    \section{Derrangements}

    \begin{equation}
        d_n = \sum_{k = 0}^n{(-1)^k{n \choose k}(n - k)!} = \sum_{k = 0}^n{(-1)^k\frac{n!}{k!}}
    \end{equation}

    \section{Identities}
    
    \begin{equation}
        {n \choose 0} = P(n, 0) = 1
    \end{equation}

    \begin{equation}
        {0 \choose r} = P(0, r) = 0
    \end{equation}
    
    \begin{equation}
        {n \choose 1} = P(n, 1) = n
    \end{equation}
    
    \begin{equation}
        {n \choose r} = {n \choose n - r}
    \end{equation}

    \begin{equation}
        {n \choose r} = {n - 1 \choose r} + {n - 1 \choose r - 1}
    \end{equation}

    \begin{equation}
        P(n, r) = P(n, k)P(n - k, r - k), \quad k \leq r
    \end{equation}

    \section{General Strategies}

    \subsection{Select \& Scramble}

    The main idea is that permutations are just a combination with its items scrambled (i.e., a permutation of all elements), so a normal permutation problem could be modified as follows: $$
        P(n, r) \to {n \choose r}r!
    $$

    For a basic example like this, it doesn't make much sense, but you can do more advanced things with it. For example, let's say you want to select a board that consists of 5 employees and 3 members of the public, and there are 7 specific roles to fill. 20 people volunteered from the public and there are 30 employees. This kind of problem doesn't lend itself to permutations, but does have specific role assignment. But with select and scramble: $$
        C(30, 5)C(20, 3)7!
    $$

    \subsection{Complement}

    If there are problems that say something like ``at least 1'', it is easier to think of all arrangements minus the arrangements where there are none. ``At least 1'' can be rephrased as ``some'' which is equivalent to ``not none.''
\end{document}
